"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const inquirer = require("inquirer");
const config_1 = require("../config");
const utils_1 = require("../utils");
const wizard = (authContext, answersAll = {}, settings = {}) => {
    let promptFor = [];
    let target = utils_1.isOnPrem(answersAll.siteUrl) ? 'OnPremise' : 'Online';
    let strategies = config_1.getStrategies().filter((strategy) => {
        return strategy.target.indexOf(target) !== -1;
    });
    promptFor = [{
            name: 'strategy',
            message: 'Authentication strategy',
            type: 'list',
            choices: strategies.map((strategy) => {
                return {
                    name: strategy.name,
                    value: strategy.id,
                    short: strategy.name
                };
            }),
            default: strategies.reduce((position, strategy, index) => {
                if (authContext.strategy === strategy.id) {
                    position = index;
                }
                return position;
            }, 0)
        }];
    return inquirer.prompt(promptFor)
        .then((answers) => {
        return Object.assign({}, answersAll, answers);
    });
};
exports.default = wizard;

//# sourceMappingURL=chooseStrategy.js.map
